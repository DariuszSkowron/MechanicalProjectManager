<div class="container">

  <div>
    <label>
      <input type="text"
             [(ngModel)]="nameOrOrderSymbolSearch"
             class="form-control"
             placeholder="Search parts...">
    </label>

    <button type="buton"
            (click)="createPartsOrder()"
            class="btn"><i class="fas fa-plus"></i> New parts order list
    </button>

    <button type="button"
            (click)="createCommercialPart(selectedPartsOrder.id)"
            [disabled]="selectedPartsOrder == null"
            class="btn"><i class="fa fa-plus"></i> New part
    </button>
  </div>

  <div>
    <label for="Manufacturer" class="text-title">Search by manufacturer</label>
    <select id="Manufacturer" [(ngModel)]="manufacturerSearch" class="custom-select"
            (change)="filterPartsByManufacturer($event.target)">
      <option [ngValue]="undefined" selected disabled hidden>Pick one of the options available</option>
      <option [ngValue]="undefined">All parts</option>
      <option *ngFor="let commercialPart of commercialParts" value={{commercialPart.manufacturer}}>
        {{commercialPart.manufacturer}}
      </option>
    </select>
  </div>
</div>

<div class="partsContent">
  <div class="processList">

    <div>
      <h3>xx List</h3>
      <br>
      <div class="list-group list-group-flush">
        <a (click)="selectAllProcessedParts()" class="list-group-item list-group-item-action">
          <i class="fa fa-book"></i>&nbsp;All parts
        </a>
        <a *ngFor="let partsOrder of partsOrders"
           (click)="selectPartsOrder(partsOrder)" class="list-group-item list-group-item-action">
          <i class="fa fa-book"></i>&nbsp;

          <label>
            <input [(ngModel)]="partsOrder.name" (change)="updatePartsOrder(partsOrder)"
                   type="text" class="input-label" style="width: 200px"/>
          </label>
          <a (click)="deletePartsOrder(partsOrder)" class="pull-right text-danger">
            <i class="fas fa-trash"></i>
          </a>
        </a>
      </div>
    </div>
  </div>

  <!-- Parts Panel -->
  <div class="partsList">
    <div>
      <div>
        <h3 *ngIf="selectedPartsOrder != null">{{selectedPartsOrder.name}}</h3>
        <h3 *ngIf="selectedPartsOrder == null">All parts</h3>
        <p *ngIf="this.partsOrders.length === 0">There are no parts to display in this list</p>
      </div>

      <div>
        <table *ngIf="this.commercialParts.length != 0">
          <tr>
            <th>Drawing number</th>
            <th>Main process</th>
            <th>Material</th>
            <th>Manufacturer</th>
            <th>Delete part</th>
          </tr>
        </table>

        <div *ngFor="let n of commercialParts | commercialPartFilter:nameOrOrderSymbolSearch: manufacturerSearch">
          <commercial-part
            [commercialPart]="n"
            (commercialPartUpdated)="updateCommercialParts($event)"
            (commercialPartDeleted)="deleteCommercialPart($event)">
          </commercial-part>
        </div>
      </div>
    </div>
  </div>
</div>

